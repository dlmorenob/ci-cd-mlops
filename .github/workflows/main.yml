name: CI/CD para ML con MLFLOW

on:
  push:
    branches: [main]
jobs:
    ml_pipeline:
        runs-on: ubuntu-latest

        steps:
            - name: 游닌 Clonar repositorio
              uses: actions/checkout@v3

            - name: 游닌 Configurar Python
              uses: actions/setup-python@v4
              with:
                python-version: '3.9'

            - name: 游닌 Instalar dependencias
              run: |
                python -m pip install --upgrade pip
                pip install -r requirements.txt
                pip install mlflow joblib scikit-learn pandas

            - name: 游닌 Entrenar modelo
              run: make train

            - name: Validar desempe침o del modelo
              run: make validate
            - name: 游닌 Subir modelo como artefacto (si pasa validaci칩n)
              if: success()
              uses: actions/upload-artifact@v4
              with:
                  name: modelo-validado
                  path: model.pkl